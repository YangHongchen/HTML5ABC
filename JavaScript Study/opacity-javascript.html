<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>javascript改变透明度</title>
    <style type="text/css">
    body {
        background: url('img/bg.jpg');
    }
    #touming {
        width: 300px;
        height: 300px;
        background: #0f0;
        opacity: 0.3;
        filter: alpha(opacity: 30);
    }
    </style>

    <script type="text/javascript">
    window.onload = function() {
        var oDiv = document.getElementById("touming");
        // 鼠标移入的效果
        oDiv.onmouseover = function() {
                animation(70);
            }
            // 鼠标移开的效果
        oDiv.onmouseout = function() {
            animation(30);
        }
    }

    /**
     * 自定义动画效果
     * @param  {[type]} iTarget 动画执行的目标参数
     */
    var timer = null;
    var flag = 30; //默认层的透明度

    function animation(iTarget) {
        clearInterval(timer);
        var oDiv = document.getElementById("touming");
        var speed = 0;
        if (iTarget > flag) {
            speed = 10;
        } else {
            speed = -10
        }
        timer = setInterval(function() {
            if (flag == iTarget) {
                clearInterval(timer);
            } else {
                flag += speed;
                oDiv.style.opacity = flag / 100;
                oDiv.style.filter = "alpha(opacity:" + (flag) + ")";
            }
        }, 50);
    }
    </script>

</head>

<body>
    <div id="touming"></div>
</body>

</html>
